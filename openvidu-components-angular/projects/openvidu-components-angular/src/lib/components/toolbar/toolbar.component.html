<mat-toolbar id="toolbar" class="toolbar-container">
	<!-- Info container (logo, room name, recording/broadcasting status) -->
	<div id="info-container" class="info-container">
		<div>
			<!-- Branding Logo -->
			@if (!isMinimal && showLogo) {
				<img id="branding-logo" [ovLogo]="brandingLogo" />
			}

			<!-- Session Info -->
			<div id="session-info-container" [class.collapsed]="isRecordingStarted || isBroadcastingStarted">
				<!-- Room Name -->
				@if (!isMinimal && showRoomName) {
					<span id="session-name">{{ roomName }}</span>
				}

				<!-- Activities (Recording / Broadcasting) -->
				@if (isRecordingStarted || isBroadcastingStarted) {
					<div id="activities-tag">
						@if (isRecordingStarted) {
							<div id="recording-tag" class="recording-tag" (click)="openRecordingActivityPanel()">
								<mat-icon class="blink">radio_button_checked</mat-icon>
								<span class="blink">REC</span>
								<span *ngIf="recordingTime"> | {{ recordingTime | date: 'H:mm:ss' }}</span>
							</div>
						}

						@if (isBroadcastingStarted) {
							<!-- Broadcasting tag -->
							<div id="broadcasting-tag" class="broadcasting-tag">
								<mat-icon class="blink">sensors</mat-icon>
								<span class="blink">LIVE</span>
							</div>
						}
					</div>
				}
			</div>
		</div>
	</div>

	<!-- Media and menu buttons container -->
	<div class="media-buttons-container" id="media-buttons-container">
		<ov-toolbar-media-buttons
			[showCameraButton]="showCameraButton"
			[isCameraEnabled]="isCameraEnabled"
			[cameraMuteChanging]="cameraMuteChanging"
			[showMicrophoneButton]="showMicrophoneButton"
			[isMicrophoneEnabled]="isMicrophoneEnabled"
			[microphoneMuteChanging]="microphoneMuteChanging"
			[showScreenshareButton]="showScreenshareButton"
			[isScreenShareEnabled]="isScreenShareEnabled"
			[hasVideoDevices]="hasVideoDevices"
			[hasAudioDevices]="hasAudioDevices"
			[isConnectionLost]="isConnectionLost"
			[isMinimal]="isMinimal"
			[showMoreOptionsButton]="showMoreOptionsButton"
			[showFullscreenButton]="showFullscreenButton"
			[showRecordingButton]="showRecordingButton"
			[showViewRecordingsButton]="showViewRecordingsButton"
			[showBroadcastingButton]="showBroadcastingButton"
			[showBackgroundEffectsButton]="showBackgroundEffectsButton"
			[showCaptionsButton]="showCaptionsButton"
			[showSettingsButton]="showSettingsButton"
			[isFullscreenActive]="isFullscreenActive"
			[recordingStatus]="recordingStatus"
			[hasRoomTracksPublished]="hasRoomTracksPublished"
			[broadcastingStatus]="broadcastingStatus"
			[captionsEnabled]="captionsEnabled"
			[showLeaveButton]="showLeaveButton"
			[toolbarAdditionalButtonsTemplate]="toolbarAdditionalButtonsTemplate"
			[additionalButtonsPosition]="additionalButtonsPosition"
			[toolbarLeaveButtonTemplate]="toolbarLeaveButtonTemplate"
			(cameraToggled)="toggleCamera()"
			(microphoneToggled)="toggleMicrophone()"
			(screenShareToggled)="toggleScreenShare()"
			(screenTrackReplaced)="replaceScreenTrack()"
			(fullscreenToggled)="toggleFullscreen()"
			(recordingToggled)="toggleRecording()"
			(viewRecordingsClicked)="onViewRecordingsClicked.emit()"
			(broadcastingToggled)="toggleBroadcasting()"
			(backgroundEffectsToggled)="toggleBackgroundEffects()"
			(captionsToggled)="onCaptionsToggle()"
			(settingsToggled)="toggleSettings()"
			(leaveClicked)="disconnect()"
		></ov-toolbar-media-buttons>
	</div>

	<!-- Panel buttons (chat, participants, activities) -->
	<div class="menu-buttons-container" id="menu-buttons-container">
		<!-- Default activities button -->
		<button
			mat-icon-button
			id="activities-panel-btn"
			*ngIf="!isMinimal && showActivitiesPanelButton"
			matTooltip="{{ 'TOOLBAR.ACTIVITIES' | translate }}"
			(click)="toggleActivitiesPanel()"
			[disabled]="isConnectionLost"
			[ngClass]="{
				'blinking-recording-button': !isActivitiesOpened && recordingStatus === _recordingStatus.STARTED,
				'blinking-broadcasting-button': !isActivitiesOpened && broadcastingStatus === _broadcastingStatus.STARTED,
				'active-btn': isActivitiesOpened
			}"
		>
			<mat-icon>category</mat-icon>
		</button>

		<!-- Default participants button -->
		<button
			mat-icon-button
			id="participants-panel-btn"
			*ngIf="!isMinimal && showParticipantsPanelButton"
			matTooltip="{{ 'TOOLBAR.PARTICIPANTS' | translate }}"
			(click)="toggleParticipantsPanel()"
			[disabled]="isConnectionLost"
			[class.active-btn]="isParticipantsOpened"
		>
			<mat-icon>people</mat-icon>
		</button>

		<!-- Default chat button -->
		<button
			mat-icon-button
			id="chat-panel-btn"
			*ngIf="!isMinimal && showChatPanelButton"
			matTooltip="{{ 'TOOLBAR.CHAT' | translate }}"
			(click)="toggleChatPanel()"
			[disabled]="isConnectionLost"
			[class.active-btn]="isChatOpened"
		>
			<mat-icon
				matBadge="{{ unreadMessages }}"
				[matBadgeHidden]="unreadMessages === 0"
				matBadgePosition="above before"
				matBadgeSize="small"
				matBadgeColor="accent"
				aria-hidden="false"
			>
				chat
			</mat-icon>
		</button>

		<!-- External additional panel buttons  -->
		<ng-container *ngIf="toolbarAdditionalPanelButtonsTemplate">
			<ng-container *ngTemplateOutlet="toolbarAdditionalPanelButtonsTemplate"></ng-container>
		</ng-container>
	</div>
</mat-toolbar>
